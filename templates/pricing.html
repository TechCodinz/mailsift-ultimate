<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MailSift PRO - Pricing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-12">
        <h1 class="text-4xl font-bold text-center mb-12">Choose Your Plan</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 max-w-6xl mx-auto">
            <!-- Free Plan -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-bold mb-4">Free</h2>
                <div class="text-3xl font-bold mb-4">$0<span class="text-sm">/month</span></div>
                <ul class="space-y-2 mb-6">
                    <li>✅ 100 Email Credits</li>
                    <li>✅ Basic Extraction</li>
                    <li>✅ CSV Export</li>
                    <li>❌ API Access</li>
                    <li>❌ Priority Support</li>
                </ul>
                <button class="w-full bg-gray-300 py-2 rounded" disabled>Current Plan</button>
            </div>

            <!-- Starter Plan -->
            <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-purple-500">
                <div class="bg-purple-500 text-white text-sm px-2 py-1 rounded inline-block mb-2">Popular</div>
                <h2 class="text-xl font-bold mb-4">Starter</h2>
                <div class="text-3xl font-bold mb-4">$29<span class="text-sm">/month</span></div>
                <ul class="space-y-2 mb-6">
                    <li>✅ 1,000 Email Credits</li>
                    <li>✅ Advanced AI Analysis</li>
                    <li>✅ All Export Formats</li>
                    <li>✅ API Access</li>
                    <li>❌ Priority Support</li>
                </ul>
                <button onclick="subscribe('starter')" class="w-full bg-purple-600 text-white py-2 rounded hover:bg-purple-700">
                    Get Started
                </button>
            </div>

            <!-- Pro Plan -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-bold mb-4">Professional</h2>
                <div class="text-3xl font-bold mb-4">$99<span class="text-sm">/month</span></div>
                <ul class="space-y-2 mb-6">
                    <li>✅ 10,000 Email Credits</li>
                    <li>✅ Advanced AI Analysis</li>
                    <li>✅ All Export Formats</li>
                    <li>✅ API Access</li>
                    <li>✅ Priority Support</li>
                </ul>
                <button onclick="subscribe('pro')" class="w-full bg-purple-600 text-white py-2 rounded hover:bg-purple-700">
                    Get Started
                </button>
            </div>

            <!-- Enterprise Plan -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-bold mb-4">Enterprise</h2>
                <div class="text-3xl font-bold mb-4">$499<span class="text-sm">/month</span></div>
                <ul class="space-y-2 mb-6">
                    <li>✅ Unlimited Credits</li>
                    <li>✅ Advanced AI Analysis</li>
                    <li>✅ All Export Formats</li>
                    <li>✅ API Access</li>
                    <li>✅ Dedicated Support</li>
                </ul>
                <button onclick="subscribe('enterprise')" class="w-full bg-purple-600 text-white py-2 rounded hover:bg-purple-700">
                    Contact Sales
                </button>
            </div>
        </div>

        <div class="text-center mt-8">
            <a href="/" class="text-purple-600 hover:underline">← Back to App</a>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="payment-modal" class="fixed inset-0 bg-black/50 hidden flex items-center justify-center">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <h3 class="text-xl font-bold mb-4">Complete Payment</h3>
            <form id="payment-form">
                <input type="email" id="email" placeholder="Email" class="w-full p-2 border rounded mb-4" required>
                <div id="card-element" class="p-3 border rounded mb-4"></div>
                <button type="submit" class="w-full bg-purple-600 text-white py-2 rounded">
                    Pay Now
                </button>
            </form>
        </div>
    </div>

    <script>
        const stripe = Stripe('pk_test_51234567890'); // Add your Stripe public key
        let currentPlan = '';

        async function subscribe(plan) {
            currentPlan = plan;
            document.getElementById('payment-modal').classList.remove('hidden');
            
            // Setup Stripe Elements
            const elements = stripe.elements();
            const cardElement = elements.create('card');
            cardElement.mount('#card-element');
            
            document.getElementById('payment-form').onsubmit = async (e) => {
                e.preventDefault();
                
                const email = document.getElementById('email').value;
                
                // Get payment intent from server
                const response = await fetch('/api/subscribe', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({plan: currentPlan, email: email})
                });
                
                const data = await response.json();
                
                // Confirm payment
                const result = await stripe.confirmCardPayment(data.client_secret, {
                    payment_method: {
                        card: cardElement,
                        billing_details: {email: email}
                    }
                });
                
                if (result.error) {
                    alert(result.error.message);
                } else {
                    // Payment successful
                    await fetch('/api/confirm-payment', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({payment_intent_id: result.paymentIntent.id})
                    });
                    
                    alert('Payment successful! Your plan has been upgraded.');
                    window.location.href = '/';
                }
            };
        }
    </script>
</body>
</html>

