<!DOCTYPE html>
<html lang="en" x-data="{ darkMode: localStorage.getItem('darkMode') === 'true' }" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Pricing - MailSift ULTIMATE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @keyframes ultimate-gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .ultimate-bg { 
            background: linear-gradient(-45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7, #dda0dd); 
            background-size: 400% 400%; 
            animation: ultimate-gradient 20s ease infinite; 
        }
        .dark .ultimate-bg { 
            background: linear-gradient(-45deg, #2c1810, #1a2332, #0f1419, #1e2124, #36393f, #2c2f33); 
            background-size: 400% 400%; 
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
</head>
<body class="ultimate-bg min-h-screen" x-data="ultimatePricingApp()">
    <div class="container mx-auto px-4 py-12">
        <!-- Header -->
        <div class="text-center mb-16">
            <button @click="darkMode = !darkMode; localStorage.setItem('darkMode', darkMode)" 
                    class="absolute top-4 right-4 p-3 rounded-full hover:bg-white/20 transition">
                <i class="fas text-xl" :class="darkMode ? 'fa-sun text-yellow-400' : 'fa-moon text-white'"></i>
            </button>
            
            <div class="mb-6">
                <i class="fas fa-crown text-6xl text-yellow-400 mb-4"></i>
                <h1 class="text-6xl font-bold text-white mb-4">Ultimate Pricing Plans</h1>
                <p class="text-2xl text-white/80">Choose the perfect plan for ultimate email intelligence</p>
            </div>
            
            <div class="flex justify-center space-x-4 mb-8">
                <span class="bg-green-500 text-white px-4 py-2 rounded-full">âœ… 99.9% AI Accuracy</span>
                <span class="bg-blue-500 text-white px-4 py-2 rounded-full">ðŸš€ Instant Processing</span>
                <span class="bg-purple-500 text-white px-4 py-2 rounded-full">ðŸ’Ž Premium Features</span>
                <span class="bg-yellow-500 text-white px-4 py-2 rounded-full">ðŸ”’ Enterprise Security</span>
            </div>
        </div>
        
        <!-- Ultimate Pricing Cards -->
        <div class="grid grid-cols-1 md:grid-cols-5 gap-6 max-w-7xl mx-auto mb-16">
            {% for plan_key, plan in pricing.items() %}
            <div class="bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 
                        {% if plan_key == 'pro' %}border-4 border-purple-500 transform scale-105{% endif %}
                        {% if plan_key == 'enterprise' %}border-4 border-yellow-500 transform scale-110{% endif %}
                        hover:shadow-3xl transition-all duration-300">
                
                {% if plan_key == 'pro' %}
                <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm px-3 py-1 rounded-full inline-block mb-4">
                    MOST POPULAR
                </div>
                {% elif plan_key == 'enterprise' %}
                <div class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-sm px-3 py-1 rounded-full inline-block mb-4">
                    ULTIMATE POWER
                </div>
                {% endif %}
                
                <div class="text-center">
                    <h2 class="text-2xl font-bold mb-4 dark:text-white">{{ plan.name }}</h2>
                    <div class="mb-6">
                        {% if plan.price == 0 %}
                        <div class="text-4xl font-bold text-green-500">FREE</div>
                        {% else %}
                        <div class="text-4xl font-bold dark:text-white">${{ plan.price }}</div>
                        <div class="text-gray-500 dark:text-gray-400">/month</div>
                        {% endif %}
                    </div>
                    
                    <div class="text-center mb-6">
                        {% if plan.credits == -1 %}
                        <div class="text-2xl font-bold text-yellow-500">UNLIMITED</div>
                        <div class="text-sm text-gray-500">Email Credits</div>
                        {% else %}
                        <div class="text-2xl font-bold text-blue-500">{{ "{:,}".format(plan.credits) }}</div>
                        <div class="text-sm text-gray-500">Email Credits</div>
                        {% endif %}
                    </div>
                </div>
                
                <ul class="space-y-3 mb-8">
                    {% for feature in plan.features %}
                    <li class="flex items-start dark:text-gray-300">
                        <i class="fas fa-check text-green-500 mr-3 mt-1"></i>
                        <span class="text-sm">{{ feature }}</span>
                    </li>
                    {% endfor %}
                </ul>
                
                <div class="text-center mb-6">
                    <div class="text-xs text-gray-500 dark:text-gray-400 mb-2">Limits:</div>
                    <div class="text-xs text-gray-600 dark:text-gray-300">
                        API: {% if plan.limits.api_calls == -1 %}Unlimited{% else %}{{ "{:,}".format(plan.limits.api_calls) }}/month{% endif %}<br>
                        File Size: {{ plan.limits.file_size }}
                    </div>
                </div>
                
                {% if user.plan == plan_key %}
                <button class="w-full bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-400 py-3 rounded-xl font-bold" disabled>
                    Current Plan
                </button>
                {% elif plan_key == 'free' %}
                <button class="w-full bg-gray-200 dark:bg-gray-700 py-3 rounded-xl font-bold text-gray-600 dark:text-gray-400" disabled>
                    Free Plan
                </button>
                {% else %}
                <button @click="showPaymentModal('{{ plan_key }}')" 
                        class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-xl font-bold hover:opacity-90 transition transform hover:scale-105">
                    {% if plan_key == 'enterprise' %}Contact Sales{% else %}Get Started{% endif %}
                </button>
                {% endif %}
            </div>
            {% endfor %}
        </div>

        <!-- Ultimate Payment Methods -->
        <div class="text-center mb-16">
            <h3 class="text-3xl font-bold text-white mb-8">Ultimate Payment Options</h3>
            <div class="grid grid-cols-2 md:grid-cols-5 gap-8 max-w-4xl mx-auto">
                <div class="text-center">
                    <i class="fab fa-cc-visa text-5xl text-blue-600 mb-3"></i>
                    <p class="text-white text-sm">Visa</p>
                </div>
                <div class="text-center">
                    <i class="fab fa-cc-mastercard text-5xl text-red-600 mb-3"></i>
                    <p class="text-white text-sm">Mastercard</p>
                </div>
                <div class="text-center">
                    <i class="fab fa-bitcoin text-5xl text-orange-500 mb-3"></i>
                    <p class="text-white text-sm">Bitcoin</p>
                </div>
                <div class="text-center">
                    <i class="fab fa-ethereum text-5xl text-blue-400 mb-3"></i>
                    <p class="text-white text-sm">Ethereum</p>
                </div>
                <div class="text-center">
                    <i class="fas fa-coins text-5xl text-green-500 mb-3"></i>
                    <p class="text-white text-sm">USDT</p>
                </div>
            </div>
        </div>

        <div class="text-center">
            <a href="/" class="text-white hover:underline font-semibold text-xl">
                <i class="fas fa-arrow-left mr-2"></i>Back to Ultimate App
            </a>
        </div>
    </div>

    <!-- Ultimate Payment Modal -->
    <div x-show="showModal" x-transition class="fixed inset-0 bg-black/70 flex items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-3xl font-bold mb-8 dark:text-white text-center">Choose Payment Method</h3>
            
            <!-- Payment Method Tabs -->
            <div class="flex space-x-2 mb-8">
                <button @click="paymentMethod = 'card'" :class="paymentMethod === 'card' ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'"
                        class="flex-1 py-3 px-4 rounded-xl font-bold transition">
                    <i class="fas fa-credit-card mr-2"></i>Credit Card
                </button>
                <button @click="paymentMethod = 'crypto'" :class="paymentMethod === 'crypto' ? 'bg-gradient-to-r from-orange-500 to-yellow-500 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'"
                        class="flex-1 py-3 px-4 rounded-xl font-bold transition">
                    <i class="fab fa-bitcoin mr-2"></i>Crypto
                </button>
            </div>

            <!-- Card Payment -->
            <div x-show="paymentMethod === 'card'" x-transition>
                <form @submit.prevent="processCardPayment()">
                    <input type="email" x-model="email" placeholder="Email address" 
                           class="w-full p-4 border dark:border-gray-600 rounded-xl mb-4 dark:bg-gray-900 dark:text-white" required>
                    <div class="p-4 border dark:border-gray-600 rounded-xl mb-4 bg-gray-50 dark:bg-gray-900 text-center text-gray-500">
                        <i class="fas fa-credit-card text-2xl mb-2"></i>
                        <p>Secure card payment processing</p>
                    </div>
                    <button type="submit" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-xl font-bold hover:opacity-90 transition text-lg">
                        Pay $<span x-text="getPrice()"></span> - Upgrade Now
                    </button>
                </form>
            </div>

            <!-- Ultimate Crypto Payment -->
            <div x-show="paymentMethod === 'crypto'" x-transition>
                <div class="bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-300 dark:border-yellow-700 rounded-xl p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-info-circle text-yellow-600 mr-3 text-xl"></i>
                        <h4 class="font-bold text-yellow-800 dark:text-yellow-200">Ultimate Crypto Payment</h4>
                    </div>
                    <p class="text-sm text-yellow-800 dark:text-yellow-200">
                        Send exact amount to any address below and provide transaction ID for instant upgrade:
                    </p>
                </div>
                
                <div class="space-y-4 mb-6">
                    {% for crypto, address in crypto.items() %}
                    <div class="bg-gray-50 dark:bg-gray-900 p-4 rounded-xl border-2 border-gray-200 dark:border-gray-700">
                        <div class="flex justify-between items-center mb-3">
                            <div class="flex items-center">
                                <i class="fab fa-{{ crypto }} text-2xl mr-3 
                                   {% if crypto == 'btc' %}text-orange-500{% elif crypto == 'eth' %}text-blue-400{% else %}text-green-500{% endif %}"></i>
                                <div class="font-bold text-lg dark:text-white">{{ crypto.upper() }}</div>
                            </div>
                            <button @click="copyAddress('{{ crypto }}', '{{ address }}')" 
                                    class="text-purple-600 hover:text-purple-700 transition">
                                <i class="fas fa-copy text-xl"></i>
                            </button>
                        </div>
                        <div class="text-xs font-mono break-all text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 p-3 rounded border">
                            {{ address }}
                        </div>
                        <div class="text-sm text-gray-500 mt-2 text-center">
                            Amount: <span class="font-bold text-green-600">$<span x-text="getPrice()"></span> USD</span>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <input type="text" x-model="txid" placeholder="Transaction ID (after sending payment)" 
                       class="w-full p-4 border dark:border-gray-600 rounded-xl mb-6 dark:bg-gray-900 dark:text-white">
                
                <button @click="verifyCryptoPayment()" 
                        class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-4 rounded-xl font-bold hover:opacity-90 transition text-lg">
                    <i class="fas fa-shield-check mr-2"></i>Verify Payment & Upgrade
                </button>
                
                <div class="mt-6 text-center bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl">
                    <i class="fas fa-clock text-blue-500 mr-2"></i>
                    <span class="text-sm text-blue-700 dark:text-blue-300">
                        Payments confirmed within 5-15 minutes
                    </span>
                </div>
            </div>

            <button @click="closeModal()" class="w-full mt-6 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition py-2">
                <i class="fas fa-times mr-2"></i>Cancel
            </button>
        </div>
    </div>

    <script>
        function ultimatePricingApp() {
            return {
                showModal: false,
                selectedPlan: '',
                paymentMethod: 'card',
                email: '',
                txid: '',
                pricing: {{ pricing | tojson }},

                showPaymentModal(plan) {
                    this.selectedPlan = plan;
                    this.showModal = true;
                },

                closeModal() {
                    this.showModal = false;
                    this.email = '';
                    this.txid = '';
                },

                getPrice() {
                    return this.pricing[this.selectedPlan]?.price || 0;
                },

                async processCardPayment() {
                    alert(`Ultimate Card Payment Demo\nPlan: ${this.selectedPlan}\nPrice: $${this.getPrice()}\nEmail: ${this.email}\n\nIn production, this would process with Stripe for instant upgrade!`);
                    this.closeModal();
                },

                async verifyCryptoPayment() {
                    if (!this.txid) {
                        alert('Please enter your transaction ID after sending the crypto payment');
                        return;
                    }
                    
                    alert(`Ultimate Crypto Payment Verification\nPlan: ${this.selectedPlan}\nAmount: $${this.getPrice()}\nTXID: ${this.txid}\n\nIn production, this would verify on blockchain and upgrade your account instantly!`);
                    this.closeModal();
                },

                copyAddress(crypto, address) {
                    navigator.clipboard.writeText(address).then(() => {
                        alert(`âœ… ${crypto.toUpperCase()} address copied!\n\nSend exactly $${this.getPrice()} USD worth of ${crypto.toUpperCase()} to this address, then paste your transaction ID to verify payment.`);
                    });
                }
            };
        }
    </script>
</body>
</html>
